# Comment System - UI/UX Flow

## User Journey

### 1. Viewing Feed (Nearby Feed / For You Feed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  Home Feed                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ‘¤ Alice Â· @alice Â· 2h ago                  â”‚   â”‚
â”‚ â”‚ Looking for tennis partners this weekend!   â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ ğŸ“ Duluth, GA Â· ğŸ·ï¸ Tennis                  â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â¤ï¸ 12  ğŸ’¬ 5 comments  ğŸ”— Share             â”‚   â”‚ â† Clickable
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ‰ Event: Sunset Hike                       â”‚   â”‚
â”‚ â”‚ ğŸ‘¤ Bob Â· Hosting                            â”‚   â”‚
â”‚ â”‚ [Event Image]                               â”‚   â”‚
â”‚ â”‚ Saturday 6pm Â· $0 Â· 8 spots left            â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ ğŸ’¬ 23 comments  ğŸ‘¥ 12 RSVPs                â”‚   â”‚ â† Clickable
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User Action**: Click "ğŸ’¬ 5 comments" â†’ Navigate to detail page

---

### 2. Post/Event Detail Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back to Feed                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ‘¤ Alice Â· @alice Â· 2h ago                  â”‚   â”‚
â”‚ â”‚ Looking for tennis partners this weekend!   â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ ğŸ“ Duluth, GA Â· ğŸ·ï¸ Tennis                  â”‚   â”‚
â”‚ â”‚ â¤ï¸ 12  ğŸ’¬ 5 comments                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ’¬ Comments (5)                             â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ’­ Write a comment...                   â”‚ â”‚   â”‚ â† CommentForm
â”‚ â”‚ â”‚ [Text area - 500 char limit]            â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ [Post Comment]                          â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ‘¤ Bob Â· @bob Â· 1h ago                  â”‚ â”‚   â”‚ â† CommentItem
â”‚ â”‚ â”‚ I'm down! What time?                    â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â¤ï¸ 3  ğŸ’¬ Reply  ğŸš© Report              â”‚ â”‚   â”‚
â”‚ â”‚ â”‚                                         â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”‚ ğŸ‘¤ Alice Â· @alice Â· 45m ago       â”‚ â”‚ â”‚   â”‚ â† Nested Reply
â”‚ â”‚ â”‚   â”‚ How about 10am Saturday?          â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”‚ â¤ï¸ 1  ğŸ’¬ Reply                   â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚                                         â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”‚ ğŸ‘¤ Charlie Â· @charlie Â· 30m ago   â”‚ â”‚ â”‚   â”‚ â† Nested Reply
â”‚ â”‚ â”‚   â”‚ Perfect! I'll be there            â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”‚ â¤ï¸ 2  ğŸ’¬ Reply                   â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ‘¤ David Â· @david Â· 20m ago             â”‚ â”‚   â”‚ â† CommentItem
â”‚ â”‚ â”‚ Can I bring my racket?                  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â¤ï¸ 0  ğŸ’¬ Reply  ğŸš© Report              â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Replying to a Comment

**User Action**: Click "ğŸ’¬ Reply" on Bob's comment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ‘¤ Bob Â· @bob Â· 1h ago                  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ I'm down! What time?                    â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â¤ï¸ 3  ğŸ’¬ Reply  ğŸš© Report              â”‚ â”‚   â”‚
â”‚ â”‚ â”‚                                         â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â”‚ ğŸ’­ Reply to Bob...                  â”‚ â”‚ â”‚   â”‚ â† Reply Form
â”‚ â”‚ â”‚ â”‚ [Text area]                         â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â”‚ [Cancel] [Post Reply]               â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚                                         â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”‚ ğŸ‘¤ Alice Â· @alice Â· 45m ago       â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â”‚   â”‚ How about 10am Saturday?          â”‚ â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. Real-time Update

**Another user posts a comment** â†’ All viewers see it instantly

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ‘¤ Eve Â· @eve Â· Just now âœ¨             â”‚ â”‚   â”‚ â† New! (animated)
â”‚ â”‚ â”‚ I'll bring snacks!                      â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ â¤ï¸ 0  ğŸ’¬ Reply  ğŸš© Report              â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Breakdown

### CommentSection Component
```blade
<livewire:comments.comment-section 
    :commentable-type="'App\Models\Post'" 
    :commentable-id="$post->id" 
/>
```

**Props:**
- `$commentableType` - 'App\Models\Post' or 'App\Models\Activity'
- `$commentableId` - UUID of the post/activity

**Features:**
- Loads all comments with threading
- Listens to Laravel Echo for real-time updates
- Handles pagination (20 comments per page)
- Shows comment count in header

---

### CommentForm Component
```blade
<livewire:comments.comment-form 
    :commentable-type="$commentableType"
    :commentable-id="$commentableId"
    :parent-id="null"
/>
```

**Props:**
- `$commentableType` - Polymorphic type
- `$commentableId` - Polymorphic ID
- `$parentId` - null for top-level, comment ID for replies

**Features:**
- Text area with 500 char limit
- Character counter
- Submit button (disabled until valid)
- Rate limiting (5 per minute)
- Loading state during submission

---

### CommentItem Component
```blade
<livewire:comments.comment-item 
    :comment="$comment"
/>
```

**Props:**
- `$comment` - Comment model instance

**Features:**
- User avatar and username
- Comment content
- Timestamp (relative: "2h ago")
- Like button with count
- Reply button (opens nested form)
- Delete button (own comments only)
- Report button
- Nested replies (recursive rendering)

---

## Galaxy Theme Styling

### Glass Card for Comments
```css
.comment-card {
    background: rgba(30, 41, 59, 0.5);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1rem;
}
```

### Reply Indentation
```css
.comment-reply {
    margin-left: 2rem;
    border-left: 2px solid rgba(6, 182, 212, 0.3);
    padding-left: 1rem;
}
```

### Hover Effects
```css
.comment-card:hover {
    border-color: rgba(6, 182, 212, 0.5);
    transform: translateY(-2px);
    transition: all 0.2s ease;
}
```

---

## Accessibility

- **Keyboard Navigation**: Tab through comments, Enter to reply
- **Screen Readers**: Proper ARIA labels for all actions
- **Focus States**: Clear focus indicators on all interactive elements
- **Loading States**: Announce when comments are loading/updating

---

## Performance

- **Lazy Loading**: Load 20 comments initially, infinite scroll for more
- **Eager Loading**: Load user relationships to prevent N+1 queries
- **Caching**: Cache comment counts on posts/activities
- **Optimistic UI**: Show comment immediately, rollback if fails

